function tree(){for(i=0;i<erath;i++){var a=book[i].id,e=book[i].pid,o=(book[i].era,book[i].name);book[i].bad,book[i].courtesy,book[i].wifes,book[i].daughters,book[i].others;0==a?(firstname="<li class='c_"+a+"'><a>"+o+"</a><ul></ul></li>",$(firstname).appendTo(".tree>ul")):(firstname="<li class='c_"+a+"'><a>"+o+"</a><ul></ul></li>",$(firstname).appendTo(".c_"+e+">ul"))}$(".tree li ul li:only-child").parent("ul").css("paddingTop","40px").addClass("hei"),$("ul:empty").remove(),$(".tree,.era").width(12e3);var r=$(window).width(),t=$(".c_0").width()+40;$(".tree").width(t),t>r-60?$(".era").width(t+60):$(".era").width(r),$(".tree li a").hover(function(){var a=$(this).parent().attr("class").replace(/[^0-9]/gi,""),e=["长","次","三","四","五","六","七","八","九"],o=book[a].id,r=book[a].pid,t=book[a].era,i=book[a].name,n=book[a].bad,l=book[a].courtesy,p=book[a].wifes,c=book[a].daughters,h=book[a].others,v=eraCn[t],g=$(this).parent("li"),f=$(".c_"+r+">ul>li").index(g),u=$(".c_"+r).find("a:first").text(),b=e[f],k="a"+(t.replace(/[^0-9]/gi,"")-1),m=eraCn[k],w="系"+m+u+"公"+b+"子",T="<div class='detail'><h4><span class='era2'>"+v+"</span><span class='name'>讳<strong>"+i+"</strong></span><span class='bad'><strong>生卒：</strong>"+n+"</span></h4><dl></dl><h5><span class='courtesy'><strong>字：</strong>"+l+"</span><strong class='relationship'></strong></h5><div class='children'><div class='sons'></div><div class='daughters'></div></div></div>";$(T).appendTo("body");var _=$(this).offset().left,y=$(this).offset().top;$(".detail").css("top",y+42),$(document).width()-_>380?$(".detail").css("left",_+26):$(".detail").css("left",_-380),0!=o&&$(".relationship").append(w);var C=$(".c_"+o+">ul>li>a");for(s=0;s<C.length;s++){var x=C.eq(s).text(),N="<div><strong>"+e[s]+"子：</strong>"+x+"</div>";$(N).appendTo(".sons")}for(d=0;d<c.length;d++){var U="<div><strong>"+e[d]+"女：</strong>"+c[d]+"</div>";$(U).appendTo(".daughters")}for(d=0;d<p.length;d++){if(d<1)var q="原";else var q="继";var I="<dd><strong>"+q+"配：</strong>"+p[d]+"</dd>";$(I).appendTo(".detail dl")}var S="<p><strong>备注：</strong>"+h+"</p>";h&&$(".detail").append(S)},function(){$(".detail").remove()})}var eraNo=[0,1,5,13,28,45,70,112,184,290,435,460],erath=290;$("#range").on({slide:function(){var a=parseInt($("#range").val());a<12&&($(".tree>ul>li").remove(),erath=eraNo[a],tree())}}),$(function(){$("#range").noUiSlider({start:[9],step:1,orientation:"vertical",range:{min:[1],max:[13]}}),$(".noUi-handle").attr("title","鼠标拖动控制显示层级");for(var a in eraCn){var e="<li><a>"+eraCn[a]+"</a></li>";$(e).appendTo(".era"),$(".era li:odd").addClass("bg")}tree()});